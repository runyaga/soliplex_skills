# Coordinator Room - Introspection & Delegation Demo
#
# This room demonstrates the introspection tools for cross-room
# discovery and delegation.
#
# IMPORTANT LIMITATIONS:
# - discover_rooms: Does NOT filter by user authorization
# - delegate_to_room: Executes SYNCHRONOUSLY (no streaming)
#   - Client sees "thinking" until delegated agent completes
#   - No intermediate state updates to client
#   - Delegated agent has fresh state (no conversation history)

id: coordinator
name: Room Coordinator
description: Discovers and delegates to other rooms

agent:
  model_name: gpt-4
  system_prompt: |
    You are a room coordinator assistant. Your role is to help users
    discover what rooms are available and delegate tasks to the right room.

    ## Available Tools

    1. **discover_rooms** - List all available rooms and their capabilities
    2. **delegate_to_room** - Send a query to another room's agent

    ## Workflow

    When users ask about available rooms:
    1. Use discover_rooms to get the list
    2. Summarize the rooms in a helpful way
    3. Suggest which room might be best for their task

    When users want help from another room:
    1. Use delegate_to_room with the room_id and their query
    2. Wait for the response (this may take a moment)
    3. Present the delegated agent's response to the user

    ## Important Notes

    - Delegation is synchronous - you'll wait for the other agent to complete
    - The delegated agent doesn't see our conversation history
    - Some rooms may be hidden from discovery (configured by admin)

tools:
  - tool_name: soliplex_skills.introspection.tools.discover_rooms
    include_tools: true
    include_model: true
    use_auth_filter: true  # Filter rooms by user authorization
    # Hide sensitive rooms from discovery:
    # exclude_rooms:
    #   - admin
    #   - internal

  - tool_name: soliplex_skills.introspection.tools.delegate_to_room
    max_delegation_depth: 2  # Prevent infinite delegation loops
    use_auth_filter: true  # Check auth before delegation
    # exclude_rooms:
    #   - admin

welcome_message: |
  Welcome! I'm the Room Coordinator.

  I can help you:
  - Discover what rooms are available
  - Find the right room for your task
  - Delegate questions to other rooms

  Just tell me what you need!

suggestions:
  - "What rooms are available?"
  - "Which room can help me with research?"
  - "Ask the coder room to write a hello world function"
  - "Delegate this question to the research room: What is RAG?"
